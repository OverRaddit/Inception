# 10/6

## 오늘의 업적

- ENTRYPOINT와 RUN 명령어를 언제써야 하는 지 알게되었다.
- compose-up을 사용해 컨테이너를 돌려보고 포트포워딩 설정도 성공했다.
- 준비한 설정파일을 이미지에 복사해 넣는 건 성공함. 적용은 아직.

## 23:48

- 이미지를 빌드하고 컨테이너 돌렸다.
- entrypoint 키워드를 써서 마치 쉘에 명령어를 입력하듯 적어보려했다.
- entrypoint는 1개만 먹는 것 같다. 그래서인지 마지막만 실행되고 나머지는 실행되지 않았다.
  - 맞는지 공식 문서에서 확인해보자.
  - entrypoint를 설정하는 것은 기본 서비스의 이미지에서 설정한 ENTRYPOINT를 덮어쓰게 된다.
  - dockerfile의 entrypoint 보다 docker-compose의 entrypoint가 우선순위높음.
  - 덮어쓴다는 것으로 미루어 보아 entrypoint로 등록할 수 있는 커맨드는 1개뿐이다.
  - 그렇다면 셋팅해야 하는 쉘 명령어들이 적힌 sh 파일을 공유해서 그걸 실행하게 하면?

- 근데 왜 docker-compose로 돌리는 컨테이너는 즉시 종료가 되는걸까?
  - 도커 컨테이너는 하나의 명령어를 실행한다.
  - 명령어의 수행이 끝나면 종료한다.
  - 따라서, 명령어를 주지 않거나 단발적으로 실행되고 끝나는 명령어를 주면 곧바로 종료된다.
  => 패키지설치는 RUN 키워드를 이용하고 기존 이미지에 있는 ENTRYPOINT를 덮어쓰지 않으니 정상동작했다.

- 컨테이너가 잘 돌아가는데 터미널을 열어서 명령어를 날려보고싶다.
- 일단 alpine위에 NGINX가 설치된 이미지를 사용하고있었기 때문에, 이제 내가 직접 같은 역할을 하는 이미지를 만들어내야 한다.

- 직접 만든 이미지로 엔진엑스 돌리기 성공.
- 다음은 호스트에서 준비한 설정파일로 엔진엑스를 돌려보자.